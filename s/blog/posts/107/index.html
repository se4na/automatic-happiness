<!DOCTYPE html>

<html lang='ja'>
<head>
<link href='https://michilu.com/blog/posts/107/' rel='canonical'>
<link href='https://michilu.com/blog/posts/107/' rel='amphtml'>
<meta content='noindex' name='robots'>
<meta charset='utf-8'>
<meta content='width=device-width,minimum-scale=1,initial-scale=1' name='viewport'>
<meta content='telephone=no' name='format-detection'>
<script async custom-element='amp-form' src='https://cdn.ampproject.org/v0/amp-form-0.1.js'></script>
<script async custom-element='amp-analytics' src='https://cdn.ampproject.org/v0/amp-analytics-0.1.js'></script>
<script async custom-element='amp-list' src='https://cdn.ampproject.org/v0/amp-list-0.1.js'></script>
<script async custom-template='amp-mustache' src='https://cdn.ampproject.org/v0/amp-mustache-0.2.js'></script>
<script async custom-element='amp-fit-text' src='https://cdn.ampproject.org/v0/amp-fit-text-0.1.js'></script>
<script async custom-element='amp-carousel' src='https://cdn.ampproject.org/v0/amp-carousel-0.1.js'></script>
<script async src='https://cdn.ampproject.org/v0.js'></script>
<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
<title>[Django][s6]: Django Testing&middot;ツキヨミチル</title>
<style amp-custom>
body,hr{position:relative}figure,p{padding-bottom:2.4rem}*{border:0;font:inherit;margin:0;padding:0;text-rendering:geometricPrecision}code,kbd,pre,samp{border-radius:2px;overflow-y:hidden;overflow-x:auto}html{box-sizing:border-box;font-size:62.5%;height:100%}@media screen and (min-width:960px){html{font-size:78.125%}}body{box-sizing:border-box;color:#3c3c3d;font-size:1.6rem;line-height:2.4rem;min-height:100%}h1,h2,h3,h4,h5,h6{font-weight:500}h1,h2,h3{line-height:4.8rem;padding:.8rem 0 1.6rem}form,h4,h5,h6{padding:2.4rem 0}h1{font-size:3.6rem}h2{font-size:3.2rem}h3{font-size:2.8rem}h4{font-size:2rem}h5{font-size:1.8rem}h6{font-size:1.6rem}.fs-small,code,kbd,pre,samp,small,sub,sup{font-size:1.2rem}code,kbd,pre,samp{background-color:#efeff0;color:#e528b0;font-family:Consolas,Monaco,"Courier New",monospace;line-height:1}code,kbd,samp{padding:.4rem .4rem .2rem}pre{line-height:2.4rem;padding:1.2rem 1rem;margin:0 0 2.4rem}pre code,pre kbd,pre samp{background-color:transparent;border:none;border-radius:0;padding:0}a:link{color:#4076D4}a:visited{color:#9140D4}a:focus,a:hover{color:#2e68cc}a:active{color:#D44076}img,video{max-width:100%;display:table}hr{height:4.8rem;margin-bottom:2.4rem}hr:before{background-color:#cdcdce;content:'';height:1px;position:absolute;top:50%;width:100%}ol,ul{margin-left:2rem;padding:0 0 2.4rem}ol{list-style-type:decimal}blockquote p:last-child,ol ol,ul ul{padding-bottom:0}ul{list-style-type:disc}cite,dt,em,i,q>q{font-style:italic}dd{padding-left:2rem}blockquote{margin:0 0 2.4rem 1.2rem;border-left:.3rem solid #cdcdce;padding:2.4rem 1.2rem}figure{margin:0 auto}figure img{display:table;margin:0 auto}small,sub,sup{line-height:1}caption,figcaption{font-size:1.2rem;font-style:italic;text-align:center}.ta-left,table th{text-align:left}b,strong,var{font-weight:700}q:after,q:before{content:"'"}.checkbox:before,.checkbox__label:after,.radio:before,.radio__label:after{content:'';margin-top:-10px;position:absolute}abbr,dfn{border-bottom:.1rem dotted #5a5a5b;cursor:default}table{border-radius:2px;border-collapse:separate;border-spacing:0;margin-bottom:2.4rem;width:100%}table th{font-weight:500}table td,table th{padding:0 .6rem}label{color:#7d7d7e}button,input,label,select,textarea{display:block;resize:none;-webkit-appearance:none;-moz-appearance:none}input:-webkit-autofill,select:-webkit-autofill,textarea:-webkit-autofill{color:#3c3c3d;-webkit-text-fill-color:#3c3c3d;-webkit-box-shadow:0 0 0 1000px #fff inset}.checkbox [disabled],.checkbox [disabled]+*,.disabled,.radio [disabled],.radio [disabled]+*,.select [disabled],.select [disabled]+*,.textfield [disabled],.textfield [disabled]+*,[type=button][disabled],[type=submit][disabled],button[disabled]{cursor:default;opacity:.5;pointer-events:none}.smooth{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.f-none{float:none}.f-left{float:left}.f-right{float:right}.clearfix{clear:both;overflow:hidden}.ta-center{text-align:center}.ta-right{text-align:right}.fs-base{font-size:1.6rem}.fs-large{font-size:2rem}.fw-light{font-weight:300}.fw-normal{font-weight:400}.fw-semibold{font-weight:600}.fw-bold{font-weight:700}.btn,[type=button],[type=submit],button{background-color:#E83FB8;border:none;border-radius:.2rem;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;height:4.8rem;line-height:4.8rem;max-width:100%;-webkit-transition-property:background-color;transition-property:background-color;-webkit-transition-duration:.2s;transition-duration:.2s;margin:0 auto;padding:0 3rem;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:auto}.btn:link,.btn:visited,[type=button]:link,[type=button]:visited,[type=submit]:link,[type=submit]:visited,button:link,button:visited{color:#fff;text-decoration:none}.btn:focus,.btn:hover,[type=button]:focus,[type=button]:hover,[type=submit]:focus,[type=submit]:hover,button:focus,button:hover{background-color:#e528b0;color:#fff}.btn:focus,[type=button]:focus,[type=submit]:focus,button:focus{outline:#7d7d7e dotted .1rem}.btn:active,[type=button]:active,[type=submit]:active,button:active{background-color:#E83FB8}.btn--secondary{background-color:#efeff0;color:#3c3c3d}.btn--secondary:link,.btn--secondary:visited{color:#3c3c3d}.btn--secondary:focus,.btn--secondary:hover{background-color:#dededf;color:#3c3c3d}.btn--link,.btn--link:active{background-color:transparent}.btn--secondary:active{color:#7d7d7e}.btn--link,.btn--link:link{color:#4076D4}.btn--link{text-decoration:underline}.btn--link:visited{color:#9140D4}.btn--link:focus,.btn--link:hover{color:#2e68cc;background-color:transparent}.btn--link:active{color:#D44076}.checkbox,.radio{cursor:pointer;display:inline-block;margin-bottom:2.4rem;padding:0 1rem 0 2.25rem;position:relative}.checkbox:before,.radio:before{background-color:#fff;border:2px solid #7d7d7e;height:16px;left:0;top:50%;width:16px}.checkbox input[type=checkbox],.radio input[type=radio]{opacity:0;position:absolute;z-index:-1}.checkbox__label,.radio__label{color:#7d7d7e;font-size:1.2rem;line-height:1}.checkbox__label:after,.radio__label:after{border:1px solid transparent;height:18px;left:0;top:50%;width:18px}.checkbox input[type=checkbox]:focus+.checkbox__label:after,.radio input[type=radio]:focus+.radio__label:after{border-color:#E83FB8;box-shadow:0 1px 2px 1px #dededf inset}.select,.textfield{background-color:#fff;display:block;margin-top:-2px;margin-bottom:2.4rem;position:relative}.select__label,.textfield__label{background-color:#fff;font-size:1.2rem;position:absolute;left:1px;line-height:1;padding:.5rem;right:1px;top:1px}.select select,.textfield input,.textfield textarea{background-color:transparent;border:1px solid #7d7d7e;border-radius:2px;box-sizing:border-box;padding:1.8rem .5rem .6rem;position:relative;width:100%}.select select:focus,.textfield :focus{border-color:#E83FB8;box-shadow:0 1px 2px 0 #dededf inset;outline:0}.radio:before,.radio__label:after{border-radius:20px}.radio input[type=radio]:checked+.radio__label:before{background-color:#e528b0;border-radius:20px;content:'';height:10px;left:5px;margin-top:-5px;position:absolute;top:50%;width:10px}.checkbox:before,.checkbox__label:after{border-radius:2px}.checkbox input[type=checkbox]:checked+.checkbox__label:after{color:#e528b0;content:'\2714';font-size:14px;line-height:18px;text-align:center}.select:after{content:'';border-left:.6rem solid transparent;border-right:.6rem solid transparent;border-top:.6rem solid #7d7d7e;height:0;margin-top:-.5rem;position:absolute;right:1rem;bottom:1.3rem;width:0}.select select{z-index:100}.select option[disabled]{background-color:#efeff0;color:#5a5a5b}.grid{display:-ms-flexbox;display:-webkit-box;display:flex}.grid>*{-ms-flex:1;flex:1;-webkit-box-flex:4;-ms-flex-positive:4;flex-grow:4;padding-left:1rem;padding-right:1rem}.grid>:first-child:not(:last-child){margin-left:-1rem}.grid>:last-child:not(:first-child){margin-right:-1rem}.grid>.column--light{-webkit-box-flex:2;-ms-flex-positive:2;flex-grow:2}.grid>.column--heavy{-webkit-box-flex:8;-ms-flex-positive:8;flex-grow:8}@media (max-width:599px){.grid--medium{display:block}.grid--medium>*{padding-left:0;padding-right:0}.grid--medium>:first-child{margin-left:0}.grid--medium>:last-child{margin-right:0}}@media (max-width:959px){.grid--large{display:block}.grid--large>*{padding-left:0;padding-right:0}.grid--large>:first-child{margin-left:0}.grid--large>:last-child{margin-right:0}}.wrapper{margin:0 auto;max-width:960px;padding:4.8rem 0}.wrapper--large{max-width:1200px;padding:7.2rem 0}.wrapper--small{max-width:640px;padding:2.4rem 0}
.btn--primary{background-color:#3FE8B8}.btn--primary:focus,.btn--primary:hover{background-color:#28e5b0}.btn--primary:active{color:#3FE8B8}.btn--success{background-color:#3FE8B8}.btn--success:focus,.btn--success:hover{background-color:#28e5b0}.btn--success:active{color:#3FE8B8}.btn--info{background-color:#3FB8E8}.btn--info:focus,.btn--info:hover{background-color:#28b0e5}.btn--info:active{color:#3FB8E8}.btn--warning{background-color:#E8B83F}.btn--warning:focus,.btn--warning:hover{background-color:#e5b028}.btn--warning:active{color:#E8B83F}.btn--danger{background-color:#E8633F}.btn--danger:focus,.btn--danger:hover{background-color:#e55028}.btn--danger:active{color:#E8633F}@media only screen and (orientation: portrait){.gsc-results-wrapper-overlay{left:3%;top:2%;width:94%;height:96%;padding:30px 15px 15px}}#navbar-top{position:fixed}#navbar-bottom{max-width:800px;bottom:0}#navbar-top,#navbar-bottom{width:100%;z-index:2;transition-delay:0s,0s;transition-duration:.2s,.2s;transition-timing-function:ease,ease}@media screen and (orientation: landscape){#navbar-top{width:inherit;left:inherit;right:0}}#share-icon{width:100%;margin:0;background:#fff;box-shadow:0 0 1px #767676}#share-icon>a{padding-top:0;padding-bottom:10px;color:#999;text-decoration:none}#share-icon>a:first-child{box-shadow:inset -1.5px 0 0px #f3f3f3;border-radius:0}@media screen and (orientation: landscape){#share-icon>a:first-child{min-width:calc(100vw/6)}}#share-icon>a [class^="icon-"],#share-icon>a [class*=" icon-"]{background-color:#fff}#share-icon>a.share-facebook:hover,#share-icon>a.share-facebook:active,#share-icon>a.share-facebook:focus{color:#3b5998}#share-icon>a.share-twitter:hover,#share-icon>a.share-twitter:active,#share-icon>a.share-twitter:focus{color:#68aade}#share-icon>a.share-line:hover,#share-icon>a.share-line:active,#share-icon>a.share-line:focus{color:#00cf00}#share-icon>a.share-hatena:hover,#share-icon>a.share-hatena:active,#share-icon>a.share-hatena:focus{color:#008fde}#share-icon>a.share-pinterest:hover,#share-icon>a.share-pinterest:active,#share-icon>a.share-pinterest:focus{color:#e60023}body{font-family:Cambria,"Times New Roman",Times,"游明朝体","Yu Mincho",YuMincho,"Hiragino Mincho ProN",serif}header{margin:0;border:0;top:0;left:0;background-color:#4f8ef6;color:#fff}header:nth-of-type(1) amp-img:nth-of-type(1){vertical-align:text-top}header .btn{color:#fff;text-decoration:none;opacity:inherit}header .btn:link,header .btn:visited{color:#fff}@media only screen and (max-width: 693px) and (orientation: portrait){.--first-view{min-height:100vh}}h1:nth-of-type(1){margin-top:0}img{max-width:100%}amp-img[layout='fill']>img[src]{object-fit:cover}amp-img[layout='responsive']>img[src]{object-fit:scale-down}hr{height:0;margin:0;padding:0;border:0;border-top:1px solid rgba(0,0,0,0.1);border-bottom:1px solid #fff}a{color:rgba(0,0,0,0.8)}a:active,a:hover,a:visited{color:rgba(0,0,0,0.8);text-decoration:none}article .--pre-bar-spacer{height:24px}article header .h1,article header .h2,article header .h3,article header .h4,article header .h5,article header .h6,article header h1,article header h2,article header h3,article header h4,article header h5,article header h6,article section .h1,article section .h2,article section .h3,article section .h4,article section .h5,article section .h6,article section h1,article section h2,article section h3,article section h4,article section h5,article section h6{letter-spacing:-0.02em;font-weight:700;margin-left:-1.8px;line-height:1.15;margin-top:40px;margin-bottom:4px}article header .h1,article header .h2,article header h1,article header h2,article section .h1,article section .h2,article section h1,article section h2{font-size:28px}article header .h2,article header h2,article section .h2,article section h2{font-weight:700;margin-top:16px;margin-bottom:6px}article header p,article section p{margin-bottom:30px}article header li,article section li{margin-bottom:15px}article header p,article header li,article section p,article section li{font-size:18px;letter-spacing:.005rem;line-height:1.45;font-weight:400}article .share--btn{padding:0 10px}article .pocket-btn{display:inline-block;height:20px;vertical-align:middle;margin-top:-2px}article amp-ad[type='adsense']{margin-bottom:1rem}article.has-ads .grid>amp-ad{padding:0}@media screen and (orientation: landscape){article.has-ads .grid>amp-ad{max-height:calc(100vh - 48px - 50px)}}@media only screen and (max-width: 693px){article.has-ads .wrapper:nth-child(4) .--pc{display:none}}@media only screen and (min-width: 694px){article.has-ads{display:-webkit-flex;display:-moz-flex;display:-ms-flex;display:-o-flex;display:flex;-webkit-flex-wrap:wrap;-moz-flex-wrap:wrap;-o-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-flex-direction:row-reverse;-moz-flex-direction:row-reverse;-o-flex-direction:row-reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;-webkit-justify-content:flex-start;-moz-justify-content:flex-start;-o-justify-content:flex-start;-ms-justify-content:flex-start;justify-content:flex-start}article.has-ads .wrapper:nth-child(1),article.has-ads .wrapper:nth-child(3){width:calc(100% - 336px - 2.4rem);margin:0;padding:2.4rem;padding-right:0}article.has-ads .wrapper:nth-child(1){order:-2}article.has-ads .wrapper:nth-child(2){display:none}article.has-ads .wrapper:nth-child(4){order:-1;width:336px;height:0;padding:0;margin-top:48px}article.has-ads .wrapper:nth-child(4) .fs-small{margin-left:.7rem}article.has-ads .wrapper:nth-child(4) .--pc .fs-small{margin-top:calc(100vh - 30px - 48px - 90px)}article.has-ads .wrapper:nth-child(4) .--pc.is-amp .fs-small{margin-top:calc(100vh - 30px - 48px)}}@media only screen and (min-width: 694px) and (orientation: landscape){article.has-ads .wrapper:nth-child(4) .--pc .fs-small{margin-top:calc(100vh - 30px - 90px)}article.has-ads .wrapper:nth-child(4) .--pc.is-amp .fs-small{margin-top:calc(100vh - 30px)}}@media only screen and (min-width: 694px){article.has-ads .wrapper:nth-child(4) amp-ad[type='adsense']{margin-bottom:0}}.share-icon [class^="icon-"],.share-icon [class*=" icon-"]{color:#999;text-decoration:underline;background-color:#fff}.share-icon .icon-share-hatena{color:#008fde}.share-icon .icon-share-hatena:hover,.share-icon .icon-share-hatena:active,.share-icon .icon-share-hatena:focus{color:#008fde}.share-icon .icon-share-pocket{color:#ff004c}.share-icon .icon-share-pocket:hover,.share-icon .icon-share-pocket:active,.share-icon .icon-share-pocket:focus{color:#ff004c}@media only screen and (orientation: portrait){article header .h1,article header .h2,article header .h3,article header .h4,article header .h5,article header .h6,article header h1,article header h2,article header h3,article header h4,article header h5,article header h6,article section .h1,article section .h2,article section .h3,article section .h4,article section .h5,article section .h6,article section h1,article section h2,article section h3,article section h4,article section h5,article section h6{line-height:1.2}article header .h1,article header .h2,article header h1,article header h2,article section .h1,article section .h2,article section h1,article section h2{font-size:26px}article header p,article header li,article section p,article section li{font-size:20px;line-height:1.6}}.embed-responsive-3by1{padding-bottom:30%}.embed-responsive-3by1 .embed-responsive-item{height:auto;margin-top:-16.66666%}.text-muted{color:#777}amp-list>[overflow]{position:absolute;bottom:0}amp-list article{padding-top:.7rem}amp-list article a{text-decoration:none}amp-list article a:link,amp-list article a:visited{color:inherit}amp-list article a>p:nth-child(1){margin-left:1vw;margin-right:2vw}amp-list article a>p:nth-of-type(2){overflow:hidden}amp-list figure{position:relative;width:8em;height:8em;padding-bottom:initial;margin-right:1%}amp-list amp-img{max-width:100%}amp-list amp-img[layout]{margin-start:initial;-webkit-margin-start:initial}amp-list p{margin-left:4vw;margin-right:4vw;font-family:"Helvetica Neue",Helvetica,Arial,"游ゴシック体","Yu Gothic",YuGothic,"Hiragino Kaku Gothic ProN",Meiryo,sans-serif}.explore{width:100vw;top:0;bottom:0;left:-100vw;z-index:3;transition:left ease-in-out .2s}.explore>div{min-height:100vh;position:relative;z-index:2;background-color:#fefefe}.explore amp-carousel{margin:0 auto;max-width:calc((100vh - 48px - 1em)*4/3);max-height:calc(100vh - 48px - 1em)}@media only screen and (min-aspect-ratio: 3 / 4) and (min-height: 768px){.explore amp-carousel{max-width:calc((100vh - 48px - 1em)*4/3/2);max-height:calc((100vh - 48px - 1em)/2)}}.explore amp-carousel amp-fit-text{position:absolute;margin:auto 0 0;max-height:calc(100%*2/3);color:#fefefe;font-weight:600;text-shadow:.5px 1.5px rgba(0,0,0,0.15);z-index:0}.explore amp-carousel amp-fit-text>div:first-of-type{background-image:url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeDE9IjAuNSIgeTE9IjAuMCIgeDI9IjAuNSIgeTI9IjEuMCI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwLjAiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC41NCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==');background-size:100%;background-image:-webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, rgba(0,0,0,0)),color-stop(100%, rgba(0,0,0,0.54)));background-image:-moz-linear-gradient(rgba(0,0,0,0) 0%,rgba(0,0,0,0.54) 100%);background-image:-webkit-linear-gradient(rgba(0,0,0,0) 0%,rgba(0,0,0,0.54) 100%);background-image:linear-gradient(rgba(0,0,0,0) 0%,rgba(0,0,0,0.54) 100%);backdrop-filter:blur(1px)}.explore .next{min-width:100vw;max-width:none;overflow-x:auto}.explore .next amp-list{min-height:0}.explore .next amp-list>[role='list']{position:relative;height:auto;width:auto;min-width:100vw;max-width:none;display:-webkit-flex;display:-moz-flex;display:-ms-flex;display:-o-flex;display:flex;flex-wrap:wrap;-webkit-justify-content:space-between;-moz-justify-content:space-between;-o-justify-content:space-between;-ms-justify-content:space-between;justify-content:space-between}.explore .next amp-list>[role='list']>a[role='listitem']{color:rgba(255,255,255,0.95);margin-top:1px;position:relative;z-index:0;overflow:hidden;-webkit-border-radius:2px;-moz-border-radius:2px;-o-border-radius:2px;-ms-border-radius:2px;border-radius:2px;width:calc((100vw - 2px)/3);height:calc((100vh - 2px)/3)}.explore .next amp-list>[role='list']>a[role='listitem']:active,.explore .next amp-list>[role='list']>a[role='listitem']:hover,.explore .next amp-list>[role='list']>a[role='listitem']:visited{color:rgba(255,255,255,0.95);text-decoration:none}@media only screen and (min-aspect-ratio: 3 / 4){.explore .next amp-list>[role='list']>a[role='listitem']{width:calc((100vw - 2px)/3);height:calc((100vh - 1px)/2)}}.explore .next amp-list>[role='list']>a[role='listitem']:nth-of-type(12n+6),.explore .next amp-list>[role='list']>a[role='listitem']:nth-of-type(12n+9),.explore .next amp-list>[role='list']>a[role='listitem']:nth-of-type(12n+11){margin-top:calc(-1*(100vh - 2px)/3)}@media only screen and (min-aspect-ratio: 3 / 4){.explore .next amp-list>[role='list']>a[role='listitem']:nth-of-type(12n+6),.explore .next amp-list>[role='list']>a[role='listitem']:nth-of-type(12n+9),.explore .next amp-list>[role='list']>a[role='listitem']:nth-of-type(12n+11){margin-top:calc(-1*(100vh - 1px)/2)}}.explore .next amp-list>[role='list']>a[role='listitem']:nth-of-type(12n+5),.explore .next amp-list>[role='list']>a[role='listitem']:nth-of-type(12n+11){width:calc((100vw - 2px)/3*2 + 1px);height:calc((100vh - 2px)/3*2 + 1px)}@media only screen and (min-aspect-ratio: 3 / 4){.explore .next amp-list>[role='list']>a[role='listitem']:nth-of-type(12n+5),.explore .next amp-list>[role='list']>a[role='listitem']:nth-of-type(12n+11){width:calc((100vw - 2px)/3*2 + 1px);height:100vh}}.explore .next amp-list>[role='list']>a[role='listitem']>amp-fit-text{position:absolute;bottom:0;width:100%;max-height:100%;color:#fefefe;font-family:"Helvetica Neue",Helvetica,Arial,"游ゴシック体","Yu Gothic",YuGothic,"Hiragino Kaku Gothic ProN",Meiryo,sans-serif;font-weight:600;text-shadow:.5px 1.5px rgba(0,0,0,0.15)}.explore .next amp-list>[role='list']>a[role='listitem']>amp-fit-text>div:first-of-type{background-image:url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeDE9IjAuNSIgeTE9IjAuMCIgeDI9IjAuNSIgeTI9IjEuMCI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwLjAiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC41NCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==');background-size:100%;background-image:-webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, rgba(0,0,0,0)),color-stop(100%, rgba(0,0,0,0.54)));background-image:-moz-linear-gradient(rgba(0,0,0,0) 0%,rgba(0,0,0,0.54) 100%);background-image:-webkit-linear-gradient(rgba(0,0,0,0) 0%,rgba(0,0,0,0.54) 100%);background-image:linear-gradient(rgba(0,0,0,0) 0%,rgba(0,0,0,0.54) 100%);backdrop-filter:blur(1px)}.explore .next amp-img{background-color:#999}.explore header figure{position:relative;width:48px;height:48px;margin-left:-1rem;padding-bottom:0}.explore amp-img{max-width:100%}.explore amp-img[layout]{margin-start:initial;-webkit-margin-start:initial}.explore amp-img,.explore amp-video,.explore amp-youtube{margin-start:initial;-webkit-margin-start:initial}.explore p{margin-left:4vw;margin-right:4vw}.footer{display:-webkit-flex;display:-moz-flex;display:-ms-flex;display:-o-flex;display:flex;-webkit-justify-content:space-around;-moz-justify-content:space-around;-o-justify-content:space-around;-ms-justify-content:space-around;justify-content:space-around}.footer a{font-size:1.3rem;color:rgba(0,0,0,0.67);text-decoration:none}.footer a:active,.footer a:focus,.footer a:hover{text-decoration:underline}#copyright{color:rgba(0,0,0,0.15);line-height:1.2em;height:1.2em;padding-bottom:.4em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:-webkit-flex;display:-moz-flex;display:-ms-flex;display:-o-flex;display:flex;-webkit-justify-content:center;-moz-justify-content:center;-o-justify-content:center;-ms-justify-content:center;justify-content:center}#copyright .rtl{direction:rtl;unicode-bidi:bidi-override;overflow:hidden;text-overflow:ellipsis}.bar-bottom{position:absolute;max-width:100vw;min-width:100vw;z-index:-1}html{background-color:#fff}.bar-bottom,.footer-ads-spacer{height:50px}@media only screen and (min-width: 694px){.bar-bottom,.footer-ads-spacer{height:90px}}.footer-chat-spacer{height:50px}@media screen{body,div,article,p{margin:0;padding:0}body{-webkit-text-size-adjust:100%;background-color:#e6e6e6;color:#1b1b1b;-webkit-font-smoothing:subpixel-antialiased;font-size:19px;line-height:30px;text-rendering:optimizeLegibility}body>article{padding-left:4vw;padding-right:4vw}body amp-img,body amp-video,body amp-youtube,body amp-iframe{margin-start:-4vw;-webkit-margin-start:-4vw}}@media only screen and (min-width: 694px){body>article{padding-left:0;padding-right:0}body amp-img,body amp-video,body amp-youtube,body amp-iframe{margin-start:0;-webkit-margin-start:0}}@media screen{body>header,body>article,body>footer{max-width:800px;margin-left:auto;margin-right:auto;text-align:start;word-wrap:break-word}body>article,body>footer{position:relative;background-color:#fbfbfb}body div,body p,body a{max-width:100%}body amp-img{width:100vw}body amp-img img{min-width:100vw}body amp-video,body amp-youtube,body amp-iframe{width:100vw}body video{width:100vw;height:auto;position:relative}}@media only screen and (min-width: 694px){body{margin:0 auto}body amp-img,body amp-video,body amp-youtube,body amp-iframe{width:initial}body img{min-width:initial}body>article,body>footer{box-shadow:0 12px 12px 3px rgba(0,0,0,0.2)}}@font-face{font-family:'siphandon';src:url("/fonts/siphandon.ttf?9zhtrx") format("truetype"),url("/fonts/siphandon.woff?9zhtrx") format("woff"),url("/fonts/siphandon.svg?9zhtrx#siphandon") format("svg");font-weight:normal;font-style:normal}.icon-explore,.icon-map,.icon-notifications,.icon-search{font-family:'siphandon';speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-explore:before{content:"🌍"}.icon-map:before{content:"🗺"}.icon-notifications:before{content:"🔔"}.icon-search:before{content:"🔍"}/*!
 ** @package IcoFont
 ** @version 1.0.1
 ** @author IcoFont https://icofont.com
 ** @copyright Copyright (c) 2015 - 2020 IcoFont
 ** @license - https://icofont.com/license/ */@font-face{font-family:"IcoFont";font-weight:normal;font-style:"Regular";src:url("/fonts/20201223.woff2") format("woff2"),url("/fonts/20201223.woff") format("woff")}[class^="icofont-"],[class*=" icofont-"]{font-family:"IcoFont";speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;white-space:nowrap;word-wrap:normal;direction:ltr;line-height:1;-webkit-font-feature-settings:"liga";-webkit-font-smoothing:antialiased}.icofont-pinterest:before{content:""}.icofont-xs{font-size:.5em}.icofont-sm{font-size:.75em}.icofont-md{font-size:1.25em}.icofont-lg{font-size:1.5em}.icofont-1x{font-size:1em}.icofont-2x{font-size:2em}.icofont-3x{font-size:3em}.icofont-4x{font-size:4em}.icofont-5x{font-size:5em}.icofont-6x{font-size:6em}.icofont-7x{font-size:7em}.icofont-8x{font-size:8em}.icofont-9x{font-size:9em}.icofont-10x{font-size:10em}.icofont-fw{text-align:center;width:1.25em}.icofont-ul{list-style-type:none;padding-left:0;margin-left:0}.icofont-ul>li{position:relative;line-height:2em}.icofont-ul>li .icofont{display:inline-block;vertical-align:middle}.icofont-border{border:solid .08em #f1f1f1;border-radius:.1em;padding:.2em .25em .15em}.icofont-pull-left{float:left}.icofont-pull-right{float:right}.icofont.icofont-pull-left{margin-right:.3em}.icofont.icofont-pull-right{margin-left:.3em}.icofont-spin{-webkit-animation:icofont-spin 2s infinite linear;animation:icofont-spin 2s infinite linear;display:inline-block}.icofont-pulse{-webkit-animation:icofont-spin 1s infinite steps(8);animation:icofont-spin 1s infinite steps(8);display:inline-block}@-webkit-keyframes icofont-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes icofont-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.icofont-rotate-90{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";-webkit-transform:rotate(90deg);transform:rotate(90deg)}.icofont-rotate-180{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";-webkit-transform:rotate(180deg);transform:rotate(180deg)}.icofont-rotate-270{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";-webkit-transform:rotate(270deg);transform:rotate(270deg)}.icofont-flip-horizontal{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.icofont-flip-vertical{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";-webkit-transform:scale(1, -1);transform:scale(1, -1)}.icofont-flip-horizontal.icofont-flip-vertical{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";-webkit-transform:scale(-1, -1);transform:scale(-1, -1)}:root .icofont-rotate-90,:root .icofont-rotate-180,:root .icofont-rotate-270,:root .icofont-flip-horizontal,:root .icofont-flip-vertical{-webkit-filter:none;filter:none;display:inline-block}.icofont-inverse{color:#fff}.sr-only{border:0;clip:rect(0, 0, 0, 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.sr-only-focusable:active,.sr-only-focusable:focus{clip:auto;height:auto;margin:0;overflow:visible;position:static;width:auto}@font-face{font-family:'style';src:url("/fonts/style.ttf?225wom") format("truetype"),url("/fonts/style.woff?225wom") format("woff"),url("/fonts/style.svg?225wom#style") format("svg");font-weight:normal;font-style:normal}.icon-share-google,.icon-feedly,.icon-share-pocket,.icon-share-line,.icon-share-hatena,.icon-share-facebook,.icon-share-twitter,.icon-notifications,.icon-search{font-family:'style';speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-share-google:before{content:"🔗"}.icon-feedly:before{content:"🔥"}.icon-share-pocket:before{content:"📑"}.icon-share-line:before{content:"💬"}.icon-share-hatena:before{content:"❔"}.icon-share-facebook:before{content:"🗣"}.icon-share-twitter:before{content:"🐦"}.icon-notifications:before{content:"🔔"}.icon-search:before{content:"🔍"}


article[data-src='https://michilu.com/blog/posts/107/']{display:none}
</style>
<style>

</style>
<script type='application/ld+json'>{"publisher": {"logo": {"url": "https://michilu.com/img/apple-touch-icon-180x.png", "width": 60, "@type": "ImageObject", "height": 60}, "@type": "Organization", "name": "Site Author:"}, "author": {"@type": "Person", "name": "Site Author:"}, "headline": "[Django][s6]: Django Testing&amp;mdash;", "image": {"url": "https://michilu.com/img/apple-touch-icon-180x.png", "width": 700, "@type": "ImageObject", "height": 470}, "datePublished": "2007-08-25T11:47:15+09:00", "@type": "BlogPosting", "mainEntityOfPage": "https://michilu.com/blog/posts/107/", "@context": "http://schema.org", "dateModified": "2007-08-25T15:14:27+09:00"}</script>

<meta content='🌝ﾂｷﾖﾐﾁﾙ' name='apple-mobile-web-app-title'>


<meta content='ツキヨミチル' itemprop='name'>
<meta content='ツキヨミチル' property='og:site_name'>

<meta content='article' property='og:type'>
<meta content='[Django][s6]: Django Testing' property='og:title'>

<meta content='https://michilu.com/blog/posts/107/' property='og:url'>
<meta content="[Django][s6]: Django Testing" property='og:description'>

<meta content='https://michilu.com/img/apple-touch-icon-200x.png' property='og:image'>



<link href='/manifest.json' rel='manifest'>

<link href='/img/apple-touch-icon-180x.png' rel='apple-touch-icon' sizes='180x180'>
<link href='/img/apple-touch-icon-180x.png' rel='apple-touch-icon-precomposed'>
<link href='/img/apple-touch-icon-180x.png' rel='shortcut icon'>
<link href='/img/apple-touch-icon-192x.png' rel='icon' sizes='192x192'>
</head>
<body>
<amp-analytics type='googleanalytics'>
<script type='application/json'>{"requests": {"scrollEvent": "${host}/debug/collect?${basePrefix}&t=event\n&ec=${eventCategory}&ea=${eventAction}&el=${eventLabel}&ev=${eventValue}\n&ni=${ni}\n${baseSuffix}", "scrollTiming": "${host}/debug/collect?${basePrefix}&t=timing\n&utc=${timingCategory}&utv=${timingVar}&utt=${timingValue}&utl=${timingLabel}\n${baseSuffix}"}, "vars": {"account": null}, "triggers": {"trackPageview": {"on": "visible", "request": "pageview"}, "scrollPercentage": {"on": "scroll", "request": "scrollEvent", "vars": {"ni": true, "account": null, "eventLabel": "${verticalScrollBoundary}%", "eventValue": 1, "eventCategory": "Scroll Depth", "eventAction": "Percentage"}, "scrollSpec": {"verticalBoundaries": [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]}}, "scrollPixel": {"on": "scroll", "request": "scrollEvent", "vars": {"ni": true, "account": null, "eventLabel": "${scrollTop}", "eventValue": 1, "eventCategory": "Scroll Depth", "eventAction": "Pixel Depth"}, "scrollSpec": {"verticalBoundaries": [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]}}, "scrollTiming": {"on": "scroll", "request": "scrollTiming", "vars": {"timingCategory": "Scroll Depth", "timingValue": "${totalEngagedTime}000", "timingLabel": "${verticalScrollBoundary}%", "timingVar": "Percentage", "account": null}, "scrollSpec": {"verticalBoundaries": [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]}}}}</script>
</amp-analytics>
<header class='grid' id='navbar-top'>
<div class='column--heavy grid' id='share-icon'>
<a class='btn btn--link visible-xs-inline-block' href='/'>
<span aria-hidden='true' class='icon-map'></span>
</a>
<a class='btn btn--link share-line visible-xs-inline-block' href='https://line.me/R/msg/text/?[Django][s6]: Django Testing https://michilu.com/blog/posts/107/' target='_blank' title='LINEで送る'>
<span aria-hidden='true' class='icon-share-line'></span>
</a>
<a class='btn btn--link share-hatena' href='http://b.hatena.ne.jp/add?mode=confirm&amp;url=https://michilu.com/blog/posts/107/' rel='noopener' target='_blank' title='はてブに追加する'>
<span aria-hidden='true' class='icon-share-hatena'></span>
</a>
<a class='btn btn--link share-twitter' href='https://twitter.com/share?u=https://michilu.com/blog/posts/107/&amp;text=[Django][s6]: Django Testing' rel='noopener' target='_blank' title='Twitterにツイートする'>
<span aria-hidden='true' class='icon-share-twitter'></span>
</a>
<a class='btn btn--link share-facebook' href='https://www.facebook.com/share.php?u=https://michilu.com/blog/posts/107/' rel='noopener' target='_blank' title='Facebookでシェアする'>
<span aria-hidden='true' class='icon-share-facebook'></span>
</a>
<a class='btn btn--link share-pinterest' href='https://www.pinterest.com/pin/create/button/?url=https://michilu.com/blog/posts/107/' rel='noopener' target='_blank' title='Pinterestに保存する'>
<span aria-hidden='true' class='icofont-pinterest'></span>
</a>
</div>
</header>

<article class=''>

<div class='wrapper wrapper--small'>

<div class='--pre-bar-spacer grid'>
<div class='btn btn--link disabled'>&#8203;</div>
</div>
<section>

<h1>[Django][s6]: Django Testing</h1>


<p><a class="reference external" href="http://www.djangoproject.jp/etude/4/">Django勉強会 Disk 4</a> でプレゼンした資料です。</p>
<!-- //settings
s6.options = s6.opts({
  ratio: 3/4,
  //thema: 'django',
  fontSize: 0.06
}, s6.options);

s6.themas.django = {
    styles: {
        background: {
            backgroundColor: 'gray'
        },
        presentation: {
            backgroundColor: 'black',
            color: 'white'
        },
        page: {
            /*
            backgroundColor: '#092E20',
            backgroundImage: 'none'
            */
            backgroundImage: 'url(img/background.gif)',
            link: 'white',
            alink: 'white',
            vlink: 'white'
        }
    }
};

s6.defaultStyles['.s6 h1.page.default'] = {
    fontSize: '350%'
};

s6.defaultStyles['.s6 .page.default h2.element'] = {
    margin: '5% 5% 2% 5%',
    fontSize: '150%'
};

s6.defaultStyles['.s6 .page.default div.highlight'] = {
    fontSize: '50%'
};

s6.defaultStyles['.s6 .highlight pre'] = {
    background: "#000000"
};

var head_elem = document.getElementsByTagName('head').item(0);
var link = document.createElement('link');
link.href = '/static/pygments_style_for_s6.css';
link.rel = "stylesheet";
link.type = 'text/css';
head_elem.appendChild(link); -->
<div class="section" id="django-testing">
<h1>Django Testing</h1>
<p>MiCHiLU</p>
<p>takanao at endoh dot tk</p>
<p>2007-08-25</p>
</div>
<div class="section" id="tdd">
<h1>TDD</h1>
<p>Test Driven Development</p>
</div>
<div class="section" id="id1">
<h1>開発サイクル</h1>
<ol class="arabic simple">
<li>Test</li>
<li>Coding</li>
<li>Refactoring</li>
</ol>
</div>
<div class="section" id="id2">
<h1>要するに</h1>
<p>チェンジセットにTESTが含まれてればいい</p>
<p>あとから書いてもいいんじゃない？</p>
</div>
<div class="section" id="checkintest">
<h1>コードのCheckInと同時にTestも含める</h1>
<ul class="simple">
<li>Updated: 仕様変更+TEST見直し</li>
<li>Fixed: バグフィックス+追加TEST</li>
<li>Refactored: コードの改良 (TESTの変更はダメ)</li>
</ul>
</div>
<div class="section" id="id3">
<h1>何がうれしいか</h1>
<ul class="simple">
<li>仕様も実装も忘れてよし</li>
<li>コードの変更と仕様の変更が明確</li>
</ul>
</div>
<div class="section" id="id4">
<h1>基本的な使い方</h1>
<pre class="code bash literal-block">
$ ./manage.py test [app_name ...]
</pre>
</div>
<div class="section" id="test">
<h1>どのTESTが実行されるか</h1>
<p><strong>settings.INSTALLED_APPS</strong> に含まれる <strong>app</strong> ディレクトリの</p>
<ul class="simple">
<li>models.py</li>
<li>tests.py</li>
</ul>
<p>docstring, unittest.TestCase のサブクラス</p>
</div>
<div class="section" id="id5">
<h1>TESTファイルの配置</h1>
<pre class="literal-block">
project
|---__init__.py
|---app
|   |---__init__.py
|   |---models.py
|   |---tests.py
|   `---views.py
|---manage.py
|---settings.py
|---media
|---templates
`---urls.py
</pre>
</div>
<div class="section" id="id6">
<h1>実行例</h1>
<pre class="code bash literal-block">
$ ./manage.py test
Creating test database...
...
---------------------------
Ran 11 tests in 31.182s

OK
Destroying test database...
</pre>
</div>
<div class="section" id="doctest">
<h1>doctest</h1>
<p>TESTの記述</p>
<p>Pythonインタプリタの出力を貼付けるだけ</p>
</div>
<div class="section" id="interactive-console">
<h1>Interactive Console</h1>
<pre class="code bash literal-block">
$ ./manage.py shell [--plain]
</pre>
<pre class="code python literal-block">
&gt;&gt;&gt; import django
&gt;&gt;&gt; django.VERSION
(0, 97, 'pre')
&gt;&gt;&gt; assert(django.VERSION == (0, 96, 'pre'))
...
AssertionError
</pre>
</div>
<div class="section" id="id7">
<h1>doctest</h1>
<pre class="code python literal-block">
# -*- coding: utf-8 -*-
&quot;&quot;&quot;
&gt;&gt;&gt; import django
&gt;&gt;&gt; django.VERSION
(0, 97, 'pre')

# 次は　AssertionError になる
&gt;&gt;&gt; assert(django.VERSION == (0, 96, 'pre'))
...
AssertionError
&quot;&quot;&quot;
</pre>
</div>
<div class="section" id="httpresponse">
<h1>HttpResponseをテストしたい</h1>
</div>
<div class="section" id="test-client">
<h1>Test Client</h1>
<pre class="code python literal-block">
&gt;&gt;&gt; from django.test.client import Client
&gt;&gt;&gt; c = Client()
&gt;&gt;&gt; response = c.get(&quot;/&quot;)
&gt;&gt;&gt; response.status_code
200
&gt;&gt;&gt; &quot;%d bytes&quot; % len(response.content)
'8456 bytes'
&gt;&gt;&gt; response.headers.get(&quot;Content-Type&quot;)
'text/html; charset=utf-8'
&gt;&gt;&gt; res = c.get(&quot;/redirect&quot;); res.status_code, res.headers[&quot;Location&quot;]
(301, '/redirect/')
&gt;&gt;&gt; res = c.post(&quot;/not.found&quot;, data=dict(form=&quot;dummy&quot;)); res.status_code, res.cookies
(404, &lt;SimpleCookie: &gt;)

# response.template, response.context
</pre>
</div>
<div class="section" id="content">
<h1>contentの解析</h1>
<pre class="code python literal-block">
&gt;&gt;&gt; response.content.splitlines()[0]
'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;'
</pre>
<ul class="simple">
<li>HTML: <a class="reference external" href="http://www.crummy.com/software/BeautifulSoup/">BeautifulSoup</a> , <a class="reference external" href="http://codespeak.net/lxml/">lxml</a> ...</li>
<li>XML:  <a class="reference external" href="http://pypi.python.org/pypi/Gnosis%20Utilities">gnosis</a> ...</li>
<li>JSON: <a class="reference external" href="http://pypi.python.org/pypi/simplejson">simplejson</a> ...</li>
</ul>
</div>
<div class="section" id="id8">
<h1>simplejson</h1>
<pre class="code python literal-block">
&gt;&gt;&gt; response = c.get(&quot;/blog/posts.json&quot;)
&gt;&gt;&gt; from django.utils import simplejson
&gt;&gt;&gt; json = simplejson.read(response.content)
&gt;&gt;&gt; json[0].items()
[(u'pk', u'1'), (u'model', u'blog.entry'), (u'fields', {u'content': u'\u30c6\u30b9\u30c8 ...
&gt;&gt;&gt; json[0].get(&quot;fields&quot;).items()
[(u'content', u'\u30c6\u30b9\u30c8'), (u'add_date', u'2007-08-18 16:05:14'), (u'tag', [1])]
</pre>
</div>
<div class="section" id="login-required">
<h1>&#64;login_required</h1>
<p><strong>0.97-pre</strong></p>
<pre class="code python literal-block">
&gt;&gt;&gt; c.login(username=&quot;test&quot;, password=&quot;none&quot;)
False
&gt;&gt;&gt; c.login(username=&quot;test&quot;, password=&quot;secret&quot;)
True
</pre>
</div>
<div class="section" id="id9">
<h1>テストデータ</h1>
<p>追加したり、更新したり、削除したり。</p>
<p>追加したり、更新したり。。。</p>
<p>orz</p>
</div>
<div class="section" id="fixtures">
<h1>Fixtures</h1>
<p>データの固まりをimportできる</p>
<ul class="simple">
<li>initial_data.json</li>
<li>app/fixtures/initial_data.json</li>
</ul>
<p>JSON, XML, YAML</p>
</div>
<div class="section" id="django-core-management">
<h1>django.core.management</h1>
<p><strong>0.97-pre</strong></p>
<pre class="code python literal-block">
&gt;&gt;&gt; from django.core import management
&gt;&gt;&gt; management.call_command(&quot;loaddata&quot;, &quot;utils/fixtures/auth.json&quot;)
Loading 'utils/fixtures/auth' fixtures...
Installing json fixture 'utils/fixtures/auth' from absolute path.
Installed 46 object(s) from 1 fixture(s)
&gt;&gt;&gt; management.call_command(&quot;flush&quot;)
Loading 'initial_data' fixtures...
No fixtures found.
</pre>
</div>
<div class="section" id="id10">
<h1>django.core.management</h1>
<p><strong>0.96</strong></p>
<pre class="code python literal-block">
&gt;&gt;&gt; from django.core import management
&gt;&gt;&gt; management.load_data([&quot;helpdoc/tests/auth.json&quot;])
Loading 'utils/fixtures/auth' fixtures...
Installing json fixture 'utils/fixtures/auth' from absolute path.
Installed 46 object(s) from 1 fixture(s)
&gt;&gt;&gt; management.flush()
Loading 'initial_data' fixtures...
No fixtures found.
</pre>
</div>
<div class="section" id="id11">
<h1>テストデータを作る</h1>
<p>管理画面で作る</p>
<pre class="code bash literal-block">
$ ./manage.py dumpdata app --format=json --indent=2 &gt;app/fixtures/test.json
</pre>
</div>
<div class="section" id="id12">
<h1>スクリプトで作る</h1>
<pre class="code python literal-block">
&gt;&gt;&gt; from django.core import serializers
&gt;&gt;&gt; from michilu.blog.models import Tag
&gt;&gt;&gt; [(field.name, field.get_internal_type()) for field in Tag._meta.fields]
[('value', 'CharField'), ('id', 'AutoField')]
&gt;&gt;&gt; tag = Tag(value=&quot;DUMMY_VALUE&quot;)
&gt;&gt;&gt; template = serializers.serialize(&quot;json&quot;, queryset=[tag])
&gt;&gt;&gt; template
'[{&quot;pk&quot;: &quot;None&quot;, &quot;model&quot;: &quot;blog.tag&quot;, &quot;fields&quot;: {&quot;value&quot;: &quot;DUMMY_VALUE&quot;}}]'
</pre>
</div>
<div class="section" id="id13">
<h1>スクリプトで作る</h1>
<pre class="code python literal-block">
&gt;&gt;&gt; template
'[{&quot;pk&quot;: &quot;None&quot;, &quot;model&quot;: &quot;blog.tag&quot;, &quot;fields&quot;: {&quot;value&quot;: &quot;DUMMY_VALUE&quot;}}]'
&gt;&gt;&gt; template = template[1:-1].replace('&quot;None&quot;', '&quot;%d&quot;').replace('&quot;DUMMY_VALUE&quot;', '&quot;%s&quot;')
&gt;&gt;&gt; template
'{&quot;pk&quot;: &quot;%d&quot;, &quot;model&quot;: &quot;blog.tag&quot;, &quot;fields&quot;: {&quot;value&quot;: &quot;%s&quot;}}'
&gt;&gt;&gt; fixture = &quot;[%s]&quot; % (&quot;,&quot;.join([template % (i,&quot;Spam!&quot;*i) for i in range(1,4)]))
&gt;&gt;&gt; fixture
'[{&quot;pk&quot;: &quot;1&quot;, &quot;model&quot;: &quot;blog.tag&quot;, &quot;fields&quot;: {&quot;value&quot;: &quot;Spam!&quot;}},
  {&quot;pk&quot;: &quot;2&quot;, &quot;model&quot;: &quot;blog.tag&quot;, &quot;fields&quot;: {&quot;value&quot;: &quot;Spam!Spam!&quot;}},
  {&quot;pk&quot;: &quot;3&quot;, &quot;model&quot;: &quot;blog.tag&quot;, &quot;fields&quot;: {&quot;value&quot;: &quot;Spam!Spam!Spam!&quot;}}]'
&gt;&gt;&gt; json = simplejson.read(fixture)
&gt;&gt;&gt; json[0]
{u'pk': u'1', u'model': u'blog.tag', u'fields': {u'value': u'Spam!'}}
</pre>
</div>
<div class="section" id="lorem-ipsum">
<h1>lorem ipsum</h1>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
</div>
<div class="section" id="django-contrib-webdesign">
<h1>django.contrib.webdesign</h1>
<p>lorem_ipsum.py <strong>0.97-pre</strong></p>
<pre class="code python literal-block">
&gt;&gt;&gt; from django.contrib.webdesign import lorem_ipsum
&gt;&gt;&gt; lorem_ipsum.sentence()  #ramdom
u'Laudantium nihil facere, eveniet laudantium sapiente atque harum voluptatem expedita dolor unde,
 provident itaque harum ipsam doloremque laudantium ex corrupti quisquam necessitatibus?'
&gt;&gt;&gt; lorem_ipsum.paragraph()  #between 1 and 4 sentences
u'Hic dolore voluptas ducimus magni deserunt id quo eum suscipit, ...
&gt;&gt;&gt; lorem_ipsum.paragraphs(5)  #paragraph lists
['Lorem ipsum dolor sit amet, consectetur adipisicing elit, ...
&gt;&gt;&gt; lorem_ipsum.words(5, common=False)  #ramdom words
u'dolores necessitatibus vitae aut voluptatum'
</pre>
</div>
<div class="section" id="id14">
<h1>寿限無、寿限無</h1>
<p>寿限無、寿限無
五劫の擦り切れ
海砂利水魚の
水行末 雲来末 風来末
食う寝る処に住む処
やぶら小路の藪柑子
パイポパイポ パイポのシューリンガン
シューリンガンのグーリンダイ
グーリンダイのポンポコピーのポンポコナーの
長久命の長助。</p>
</div>
<div class="section" id="jugem-py">
<h1>jugem.py</h1>
<pre class="code python literal-block">
&gt;&gt;&gt; from utils.contrib.webdesign import jugem
&gt;&gt;&gt; print jugem.sentence()
シューリンガンのグーリンダイ magna lorem 五劫の擦り切れ dolor、
&gt;&gt;&gt; print jugem.paragraph()
Magna やぶら小路の藪柑子 ut dolore incididunt 長久命の長助。, やぶら小路の藪柑子 incididunt 五劫の擦り切れ tempor ...
&gt;&gt;&gt; print jugem.paragraphs(5)
[u'\u5bff\u9650\u7121\u3001\u5bff\u9650\u7121\n\u4e94\u52ab\u306e\u64e6\u308a\u5207 ...
&gt;&gt;&gt; print jugem.words(5, common=False)
labore 食う寝る処に住む処 eiusmod 長久命の長助。 sed
</pre>
</div>
<div class="section" id="id15">
<h1>思いつく限りのテストを投入していくと...</h1>
<ul class="simple">
<li>管理が大変</li>
<li>どのTESTが転けてるのか探すのが大変</li>
<li>実行時間が長くなる</li>
</ul>
</div>
<div class="section" id="id16">
<h1>もっとサクサクやりたい</h1>
</div>
<div class="section" id="unittest">
<h1>unittest</h1>
<ul class="simple">
<li>整理しやすい</li>
<li>テストメソッドを指定して実行できる <strong>0.97-pre</strong></li>
</ul>
</div>
<div class="section" id="testcase">
<h1>TestCase</h1>
<p><strong>app/tests.py</strong></p>
<pre class="code pyhton literal-block">
# -*- coding: utf-8 -*-
&quot;&quot;&quot;
... doctest here ...
&quot;&quot;&quot;
from django.test import TestCase
from django.test.client import Client

class SimpleTest(TestCase):
    fixtures = ['mammals.json', 'birds']

    def test_details(self):
        response = self.client.get('/customer/details/')
        self.failUnlessEqual(response.status_code, 200)
</pre>
</div>
<div class="section" id="id17">
<h1>テストメソッドを指定して実行する</h1>
<p><strong>0.97-pre</strong></p>
<pre class="code bash literal-block">
$ ./manage.py test
$ ./manage.py test app
$ ./manage.py test app.SimpleTest
$ ./manage.py test app.SimpleTest.test_details
</pre>
</div>
<div class="section" id="django-test-testcase">
<h1>django.test.TestCase</h1>
<p><strong>0.97-pre</strong></p>
<pre class="code python literal-block">
assertContains(response, text, count=None, status_code=200)
assertFormError(response, form, field, errors)
assertRedirects(response, expected_path, status_code=302, target_status_code=200)
assertTemplateNotUsed(response, template_name)
assertTemplateUsed(response, template_name)
</pre>
</div>
<div class="section" id="doctests-py">
<h1><a class="reference external" href="http://michilu.googlecode.com/svn/trunk/utils/doctests.py">doctests.py</a></h1>
<p><a class="reference external" href="http://michilu.googlecode.com/svn/trunk/utils/doctests.py">http://michilu.googlecode.com/svn/trunk/utils/doctests.py</a></p>
<pre class="code python literal-block">
&gt;&gt;&gt; from utils.doctests import Test
&gt;&gt;&gt; t = Test()
&gt;&gt;&gt; response = t.client.get(&quot;/admin&quot;)
&gt;&gt;&gt; t.assertRedirects(response, &quot;/admin/&quot;, status_code=301)
&gt;&gt;&gt; response = t.client.get(&quot;/admin/&quot;)
&gt;&gt;&gt; t.assertContains(response, &quot;Password&quot;)
&gt;&gt;&gt; t.client.login(username=&quot;test&quot;, password=&quot;secret&quot;)
True
&gt;&gt;&gt; response = t.client.get(&quot;/admin/&quot;)
&gt;&gt;&gt; t.assertContains(response, &quot;Password&quot;)
Found 0 instances of 'Password' in response (expected 1)
</pre>
</div>
<div class="section" id="doctest-vs-unittest">
<h1>doctest vs unittest</h1>
<p>doctest</p>
<ul class="simple">
<li>すべてのTESTの完全なTracebackが表示される</li>
<li>前方のTESTの影響を受けることも</li>
<li>膨大な量のTracebackが出力される</li>
</ul>
<p>unittest</p>
<ul class="simple">
<li>テストメソッド単位で実行できる <strong>0.97-pre</strong></li>
<li>Tracebackが出ると、テストメソッドは止まる</li>
</ul>
</div>
<div class="section" id="id19">
<h1>使い分け</h1>
<p>doctest</p>
<ul class="simple">
<li>実行可能なドキュメントとして</li>
<li>modelsのテストは管理画面のドキュメントにも反映される
<a class="reference external" href="http://127.0.0.1:8000/admin/doc/models/">http://127.0.0.1:8000/admin/doc/models/</a></li>
</ul>
<p>unittest</p>
<ul class="simple">
<li>あらゆるテストを放り込む</li>
</ul>
</div>
<div class="section" id="vs-0-97-pre">
<h1>0.96 vs 0.97-pre</h1>
<ul class="simple">
<li>Client.loginの挙動が違う</li>
<li>SMTPConnection がdummyに差し替わる  <strong>0.97-pre</strong></li>
<li>Fixturesを丸ごと入れ替えて起動できる  <strong>0.97-pre</strong></li>
</ul>
</div>
<div class="section" id="id20">
<h1>Fixturesを指定して起動する</h1>
<p><strong>0.97-pre</strong></p>
<pre class="code bash literal-block">
$ ./manage.py testserver testdata.json
Creating test database...
...
Loading 'testdata' fixtures...
Installing json fixture 'testdata' from absolute path.
Installed 46 object(s) from 1 fixture(s)
Validating models...
Django version 0.97-pre, using settings 'michilu.settings'
Development server is running at http://127.0.0.1:8000/
Quit the server with CONTROL-C.
^C
Server stopped.
Note that the test database, ':memory:', has not been deleted. You can explore it on your own.
</pre>
</div>
<div class="section" id="others">
<h1>Others</h1>
<ul class="simple">
<li>buildbot</li>
<li>jsUnit</li>
<li><a class="reference external" href="http://dev.jquery.com/view/trunk/jquery/test/">http://dev.jquery.com/view/trunk/jquery/test/</a></li>
<li>Selenium</li>
</ul>
</div>
<div class="section" id="more">
<h1>More ...</h1>
<p><a class="reference external" href="http://michilu.com/django/doc-ja/testing/">http://michilu.com/django/doc-ja/testing/</a></p>
<hr class="docutils" />
<p><a class="reference external" href="http://MiCHiLU.com/blog/posts/107/">http://MiCHiLU.com/blog/posts/107/</a></p>
<blockquote>
<ul class="simple">
<li>Added at         Sat, 25 Aug 2007 11:47:15 +0900</li>
<li>Last modified at Sat, 25 Aug 2007 15:14:27 +0900</li>
</ul>
</blockquote>
<p>This work is licensed under a Creative Commons Attribution-Noncommercial-Share Alike 2.1 Japan License.
<a class="reference external" href="http://creativecommons.org/licenses/by-nc-sa/2.1/jp/">http://creativecommons.org/licenses/by-nc-sa/2.1/jp/</a></p>
</div>

<p>
author:




<br>
Posted on
<time datetime='2007-08-25T11:47:15+09:00'>2007-8-25</time>


<br>
Updated on
<time datetime='2007-08-25T15:14:27+09:00'>2007-8-25</time>

</p>

</section>
</div>

</article>

<script>
  (function() {
    var element, i, len, ref, selector;
  
    if (window.matchMedia('(max-width: 629px)').matches) {
      selector = '.\\-\\-pc';
    } else {
      selector = '.\\-\\-sp';
    }
  
    ref = document.querySelectorAll(selector);
    for (i = 0, len = ref.length; i < len; i++) {
      element = ref[i];
      element.parentNode.removeChild(element);
    }
  
  }).call(this);
</script>



<div class='explore'>
<div>
<header class='grid'>
<div class='grid'>
<a class='btn btn--link visible-xs-inline-block disabled'>
<figure>
<amp-img alt='Author Avatar' class='img-circle' layout='fill' src='/img/author_avatar.jpg'></amp-img>
</figure>
</a>
<a class='btn btn--link visible-xs-inline-block disabled'>&#8203;</a>
<a class='btn btn--link' href='https://feedly.com/i/subscription/feed/https://michilu.com/rss.xml' target='_blank'>
<span class='icon-feedly'></span>
</a>
<a class='btn btn--link visible-xs-inline-block disabled'>&#8203;</a>
<a class='btn btn--link visible-xs-inline-block disabled'>&#8203;</a>
</div>
</header>

<amp-carousel autoplay delay='3500' height='320' layout='responsive' loop type='slides' width='320'>
<div class='slide'>
<amp-img layout='fill' src='https://picsum.photos/2048.webp?random'></amp-img>
<amp-fit-text class='caption' layout='fill' min-font-size='15'></amp-fit-text>
</div>
</amp-carousel>
<div class='next'>
<amp-list height='1' layout='responsive' src='/amp-list/newer.json?RANDOM' width='320'>
<template type='amp-mustache'>
<a href='{{root_relative_url}}'>
<amp-fit-text height='152' layout='responsive' width='320'>{{title}}</amp-fit-text>
{{#image}}
<amp-img layout='fill' src='{{.}}'></amp-img>
{{/image}}
{{^image}}
<amp-img layout='fill' src='https://picsum.photos/2048.webp?{{root_relative_url}}'></amp-img>
{{/image}}
</a>
</template>
</amp-list>
</div>
</div>
</div>
<footer class='ta-center fs-small text-muted' id='copyright'>
&copy;<span>2001-</span><span id='this-year'>2020</span>&nbsp;
ツキヨミチル
</footer>
</body>
</html>
<script async src='/js/script.js?d1c2727beb38af70907976dee9ffe7e4'></script>